<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Escena 3 - Sala de Productos</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
</head>
<body>
  <a-scene>
    
<a-entity
  id="musica_de_fondo.mp3"
  sound="src: musica_de_fondo_3.mp3; loop: true; volume: 0.4">
</a-entity>


    <!-- Cielo elegante -->
    <a-sky color="#0a0a0a"></a-sky>
    
    <!-- Suelo -->
    <a-plane position="0 0 0" rotation="-90 0 0" width="24" height="24" color="#2C2416" material="metalness: 0.7; roughness: 0.3"></a-plane>
    
    <!-- Paredes -->
    <a-box position="0 3 -8" width="24" height="6" depth="0.3" color="#1a1410"></a-box>
    <a-box position="-12 3 0" width="0.3" height="6" depth="16" color="#1a1410"></a-box>
    <a-box position="12 3 0" width="0.3" height="6" depth="16" color="#1a1410"></a-box>
    
    <!-- IluminaciÃ³n tipo galerÃ­a -->
    <a-light type="ambient" intensity="0.5" color="#FFF8DC"></a-light>
    <a-light type="directional" position="0 6 0" intensity="0.6" color="#FFE4B5"></a-light>
    
    <!-- Focos sobre productos -->
    <a-light type="spot" position="0 4.5 -3.5" intensity="2.5" angle="32" color="#FFD700" castShadow="true"></a-light>
    <a-light type="spot" position="-3.5 4.5 -2.5" intensity="2.5" angle="32" color="#FFD700" castShadow="true"></a-light>
    <a-light type="spot" position="3.5 4.5 -2.5" intensity="2.5" angle="32" color="#FFD700" castShadow="true"></a-light>
    <a-light type="point" position="0 2.5 3.5" intensity="1.8" color="#FF6347" distance="6"></a-light>
    
    <!-- ========== PRODUCTO 1: RESERVA ========== -->
    <a-entity position="-3.2 1.1 -3.5">
      <!-- Pedestal -->
      <a-cylinder position="0 -0.35 0" radius="0.58" height="0.25" color="#4A2511" material="metalness: 0.6"></a-cylinder>
      
      <!-- Botella -->
      <a-cylinder position="0 0.55 0" radius="0.14" height="1.1" color="#228B22"
                  material="metalness: 0.85; roughness: 0.15"
                  class="botella"
                  animation="property: rotation; to: 0 360 0; loop: true; dur: 9000; easing: linear">
        
        <!-- Etiqueta -->
        <a-plane position="0 0 0.15" width="0.24" height="0.35" color="#FFD700" material="metalness: 0.7">
          <a-text value="RESERVA\nâ˜…â˜…â˜…â˜…â˜…\n2020" align="center" position="0 0 0.01" width="0.35" color="#000000"></a-text>
        </a-plane>
        
        <!-- Corcho -->
        <a-cylinder position="0 0.6 0" radius="0.09" height="0.12" color="#D2691E"></a-cylinder>
        
        <!-- Brillo -->
        <a-sphere position="0.1 0.4 0.1" radius="0.05" color="#FFFFFF" opacity="0.6"></a-sphere>
      </a-cylinder>
      
      <!-- Panel de informaciÃ³n -->
      <a-plane position="0 -0.25 0.7" width="1.7" height="0.95" color="#1a1410" opacity="0.92">
        <a-text value=" RESERVA 2020 \n\n Tempranillo\n Medalla de Oro\n D.O. La Rioja\n Precio: 45â‚¬\n\nâ˜…â˜…â˜…â˜…â˜…\n128 valoraciones\n\n[CLICK PARA COMPRAR]" 
                align="center" position="0 0 0.02" width="1.5" color="#FFD700"></a-text>
      </a-plane>
      
      <!-- Luz focal -->
      <a-light type="point" position="0 1.8 0" intensity="1.5" color="#FFD700" distance="3"></a-light>
    </a-entity>
    
    <!-- ========== PRODUCTO 2: CRIANZA ========== -->
    <a-entity position="0 1.1 -3.5">
      <a-cylinder position="0 -0.35 0" radius="0.58" height="0.25" color="#4A2511" material="metalness: 0.6"></a-cylinder>
      
      <a-cylinder position="0 0.55 0" radius="0.14" height="1.1" color="#8B0000"
                  material="metalness: 0.85; roughness: 0.15"
                  class="botella"
                  animation="property: rotation; to: 0 -360 0; loop: true; dur: 10500; easing: linear">
        
        <a-plane position="0 0 0.15" width="0.24" height="0.35" color="#C0C0C0" material="metalness: 0.7">
          <a-text value="CRIANZA\nâ˜…â˜…â˜…â˜…\n2021" align="center" position="0 0 0.01" width="0.35" color="#000000"></a-text>
        </a-plane>
        
        <a-cylinder position="0 0.6 0" radius="0.09" height="0.12" color="#D2691E"></a-cylinder>
        <a-sphere position="0.1 0.4 0.1" radius="0.05" color="#FFFFFF" opacity="0.6"></a-sphere>
      </a-cylinder>
      
      <a-plane position="0 -0.25 0.7" width="1.7" height="0.95" color="#1a1410" opacity="0.92">
        <a-text value=" CRIANZA 2021 \n\n Garnacha\n Medalla de Plata\n D.O. Navarra\n Precio: 28â‚¬\n\nâ˜…â˜…â˜…â˜…â˜†\n89 valoraciones\n\n[CLICK PARA COMPRAR]" 
                align="center" position="0 0 0.02" width="1.5" color="#C0C0C0"></a-text>
      </a-plane>
      
      <a-light type="point" position="0 1.8 0" intensity="1.5" color="#C0C0C0" distance="3"></a-light>
    </a-entity>
    
    <!-- ========== PRODUCTO 3: JOVEN ========== -->
    <a-entity position="3.2 1.1 -3.5">
      <a-cylinder position="0 -0.35 0" radius="0.58" height="0.25" color="#4A2511" material="metalness: 0.6"></a-cylinder>
      
      <a-cylinder position="0 0.55 0" radius="0.14" height="1.1" color="#DC143C"
                  material="metalness: 0.85; roughness: 0.15"
                  class="botella"
                  animation="property: position; to: 0 0.75 0; dir: alternate; loop: true; dur: 2200; easing: easeInOutSine">
        
        <a-plane position="0 0 0.15" width="0.24" height="0.35" color="#CD853F" material="metalness: 0.7">
          <a-text value="JOVEN\nâ˜…â˜…â˜…\n2023" align="center" position="0 0 0.01" width="0.35" color="#FFFFFF"></a-text>
        </a-plane>
        
        <a-cylinder position="0 0.6 0" radius="0.09" height="0.12" color="#D2691E"></a-cylinder>
        <a-sphere position="0.1 0.4 0.1" radius="0.05" color="#FFFFFF" opacity="0.6"></a-sphere>
      </a-cylinder>
      
      <a-plane position="0 -0.25 0.7" width="1.7" height="0.95" color="#1a1410" opacity="0.92">
        <a-text value="ðŸ· JOVEN 2023 ðŸ·\n\nðŸ‡ MencÃ­a\nðŸ¥‰ Medalla de Bronce\nðŸ“ D.O. Bierzo\nðŸ’° Precio: 15â‚¬\n\nâ˜…â˜…â˜…â˜†â˜†\n45 valoraciones\n\n[CLICK PARA COMPRAR]" 
                align="center" position="0 0 0.02" width="1.5" color="#FFB6C1"></a-text>
      </a-plane>
      
      <a-light type="point" position="0 1.8 0" intensity="1.5" color="#FFB6C1" distance="3"></a-light>
    </a-entity>
    
    <!-- ========== PANEL ESTADÃSTICAS ========== -->
    <a-entity position="0 2.7 2.2">
      <a-box width="4.2" height="2.8" depth="0.2" color="#000033" material="metalness: 0.8"></a-box>
      
      <a-plane position="0 0 0.12" width="3.9" height="2.5" color="#001a33" opacity="0.93">
        <a-text id="stats-panel" 
                value="â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n   ESTADISTICAS PRODUCCION\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n PRODUCCION TOTAL\n  â””â”€ Botellas: 0\n  â””â”€ Tiempo: 00:00:00\n\n VENTAS POR PRODUCTO\n  â””â”€ Reserva 2020:  0 uni\n  â””â”€ Crianza 2021:  0 uni\n  â””â”€ Joven 2023:    0 uni\n\n INGRESOS: 0â‚¬\n EFICIENCIA: 100%\n\n[Actualizacion en tiempo real]" 
                align="center" position="0 0 0.02" width="3.6" color="#00FF00"></a-text>
      </a-plane>
      
      <!-- LEDs -->
      <a-sphere position="-1.85 1.3 0.13" radius="0.045" color="#00FF00" material="emissive: #00FF00; emissiveIntensity: 2.5"
                animation="property: components.material.emissiveIntensity; from: 2.5; to: 0.8; dur: 750; dir: alternate; loop: true">
      </a-sphere>
      <a-sphere position="-1.65 1.3 0.13" radius="0.045" color="#00FF00" material="emissive: #00FF00; emissiveIntensity: 2.5"
                animation="property: components.material.emissiveIntensity; from: 2.5; to: 0.8; dur: 750; dir: alternate; loop: true; delay: 380">
      </a-sphere>
    </a-entity>
    
    <!-- ========== PREMIOS Y CERTIFICADOS ========== -->
    <a-entity position="-6.5 2.2 -5">
      <a-plane width="1.3" height="1.6" color="#8B4513" material="metalness: 0.5">
        <a-text value="\n\nPREMIOS\nINTERNACIONALES\n2024\n\nMedalla\nde Oro\n\nConcurso\nMundial" 
                align="center" position="0 0 0.02" width="1.15" color="#FFD700"></a-text>
      </a-plane>
    </a-entity>
    
    <a-entity position="6.5 2.2 -5">
      <a-plane width="1.3" height="1.6" color="#8B4513" material="metalness: 0.5">
        <a-text value="\n\nCERTIFICADO\nORGÃNICO\n\nDenominaciÃ³n\nde Origen\nProtegida\n\nD.O.P." 
                align="center" position="0 0 0.02" width="1.15" color="#90EE90"></a-text>
      </a-plane>
    </a-entity>
    
    <!-- ========== MESA DE CATA ========== -->
    <a-box position="0 0.75 0" width="3" height="0.12" depth="1.5" color="#5C4033" material="metalness: 0.6"></a-box>
    
    <!-- Copas -->
    <a-cone position="-0.8 0.95 0" radius-bottom="0.09" radius-top="0.045" height="0.45" 
            color="#87CEEB" opacity="0.75" material="transparent: true">
    </a-cone>
    <a-cone position="0 0.95 0" radius-bottom="0.09" radius-top="0.045" height="0.45" 
            color="#87CEEB" opacity="0.75" material="transparent: true">
    </a-cone>
    <a-cone position="0.8 0.95 0" radius-bottom="0.09" radius-top="0.045" height="0.45" 
            color="#87CEEB" opacity="0.75" material="transparent: true">
    </a-cone>
    
    <!-- ========== PORTAL DE VUELTA AL INICIO ========== -->
    <a-entity id="portal-inicio" position="7.5 1.8 0">
      <!-- Base -->
      <a-box position="0 -0.9 0" width="2.8" height="0.35" depth="0.55" color="#8B0000"></a-box>
      
      <!-- Anillo CLICKEABLE -->
      <a-torus id="anillo-vuelta" 
               radius="1.2" 
               radius-tubular="0.16" 
               color="#FF4500"
               material="metalness: 1; roughness: 0; emissive: #FF4500; emissiveIntensity: 1"
               animation="property: rotation; to: 0 0 -360; loop: true; dur: 7000; easing: linear"
               class="clickable">
      </a-torus>
      
      <!-- Anillo interior -->
      <a-torus radius="0.8" 
               radius-tubular="0.1" 
               color="#FFD700"
               material="metalness: 1; roughness: 0; emissive: #FFD700; emissiveIntensity: 1.2"
               animation="property: rotation; to: 0 0 360; loop: true; dur: 5000; easing: linear">
      </a-torus>
      
      <!-- Centro -->
      <a-circle radius="0.6" color="#FFA500" opacity="0.45"
                animation="property: scale; to: 1.2 1.2 1.2; dur: 1900; dir: alternate; loop: true">
      </a-circle>
      
      <!-- Texto -->
      <a-plane position="0 0 0.3" width="2.6" height="0.8" color="#000000" opacity="0.75">
        <a-text value="<<< VOLVER AL VIÃ‘EDO <<<\nðŸ”„ REINICIAR TOUR ðŸ”„" 
                align="center" position="0 0 0.02" width="2.3" color="#FFFFFF"
                animation="property: scale; to: 1.05 1.05 1.05; dur: 1400; dir: alternate; loop: true">
        </a-text>
      </a-plane>
      
      <!-- Flecha indicadora -->
      <a-cone position="0 -1.5 0" radius-bottom="0.25" radius-top="0" height="0.45" color="#FFFF00" rotation="180 0 0"
              animation="property: position; to: 0 -1.15 0; dur: 1000; dir: alternate; loop: true; easing: easeInOutSine">
      </a-cone>
      
      <!-- Luz -->
      <a-light type="point" intensity="2.2" color="#FF4500" distance="6"></a-light>
    </a-entity>
    
    <!-- ========== CÃMARA ========== -->
    <a-entity position="0 0 4.5">
      <a-camera position="0 1.6 0" wasd-controls="acceleration: 20">
        <a-cursor color="#FFD700" 
                  raycaster="objects: .clickable, .botella"
                  fuse="true"
                  fuse-timeout="1500"
                  animation__click="property: scale; startEvents: click; from: 0.75 0.75 0.75; to: 1.35 1.35 1.35; dur: 160">
          <a-ring position="0 0 -0.3" 
                  radius-inner="0.023" 
                  radius-outer="0.033" 
                  material="color: cyan; shader: flat"
                  animation__fusing="property: scale; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500; easing: easeInCubic">
          </a-ring>
        </a-cursor>
      </a-camera>
    </a-entity>
    
  </a-scene>

  <script>
    console.log(' Iniciando Escena 3 - Sala de Productos...');
    
    let produccion = 0;
    let ventasReserva = 0;
    let ventasCrianza = 0;
    let ventasJoven = 0;
    let ingresos = 0;
    let tiempoInicio = Date.now();
    
    document.querySelector('a-scene').addEventListener('loaded', function() {
      console.log('Escena 3 Cargada Correctamente');
      
      const statsPanel = document.querySelector('#stats-panel');
      
      // ActualizaciÃ³n de estadÃ­sticas
      setInterval(() => {
        const tiempo = Math.floor((Date.now() - tiempoInicio) / 1000);
        const h = Math.floor(tiempo / 3600);
        const m = Math.floor((tiempo % 3600) / 60);
        const s = tiempo % 60;
        
        produccion += Math.floor(Math.random() * 6);
        
        if (Math.random() > 0.72) {
          ventasReserva++;
          ingresos += 45;
        }
        if (Math.random() > 0.65) {
          ventasCrianza++;
          ingresos += 28;
        }
        if (Math.random() > 0.55) {
          ventasJoven++;
          ingresos += 15;
        }
        
        const eficiencia = 96 + Math.floor(Math.random() * 5);
        
        statsPanel.setAttribute('value',
          `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n` +
          `   ESTADISTICAS PRODUCCION\n` +
          `â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n` +
          ` PRODUCCION TOTAL\n` +
          `  â””â”€ Botellas: ${produccion}\n` +
          `  â””â”€ Tiempo: ${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}\n\n` +
          ` VENTAS POR PRODUCTO\n` +
          `  â””â”€ Reserva 2020:  ${ventasReserva} uni\n` +
          `  â””â”€ Crianza 2021:  ${ventasCrianza} uni\n` +
          `  â””â”€ Joven 2023:    ${ventasJoven} uni\n\n` +
          ` INGRESOS: ${ingresos.toLocaleString()}â‚¬\n` +
          ` EFICIENCIA: ${eficiencia}%\n\n` +
          `[ActualizaciÃ³n en tiempo real]`
        );
      }, 2400);
      
      // Botellas clickeables
      const botellas = document.querySelectorAll('.botella');
      
      botellas[0].addEventListener('click', function() {
        ventasReserva++;
        ingresos += 45;
        console.log(' Â¡Vendida Reserva 2020! +45â‚¬');
      });
      
      botellas[1].addEventListener('click', function() {
        ventasCrianza++;
        ingresos += 28;
        console.log(' Â¡Vendida Crianza 2021! +28â‚¬');
      });
      
      botellas[2].addEventListener('click', function() {
        ventasJoven++;
        ingresos += 15;
        console.log(' Â¡Vendida Joven 2023! +15â‚¬');
      });
      
      // PORTAL DE VUELTA AL INICIO
      const anilloVuelta = document.querySelector('#anillo-vuelta');
      
      anilloVuelta.addEventListener('click', function() {
        console.log(' Â¡Portal activado! Volviendo al inicio...');
        
        const sky = document.querySelector('a-sky');
        sky.setAttribute('animation', {
          property: 'components.material.color',
          to: '#FFFFFF',
          dur: 1000,
          easing: 'easeInCubic'
        });
        
        anilloVuelta.setAttribute('animation__fade', {
          property: 'scale',
          to: '3 3 3',
          dur: 1000,
          easing: 'easeInCubic'
        });
        
        setTimeout(() => {
          window.location.href = 'index.html';
        }, 1000);
      });
      
      // Efecto hover
      anilloVuelta.addEventListener('mouseenter', function() {
        anilloVuelta.setAttribute('material', 'emissiveIntensity', '1.8');
        anilloVuelta.setAttribute('animation__hover', {
          property: 'scale',
          to: '1.15 1.15 1.15',
          dur: 300
        });
      });
      
      anilloVuelta.addEventListener('mouseleave', function() {
        anilloVuelta.setAttribute('material', 'emissiveIntensity', '1');
        anilloVuelta.setAttribute('animation__hover', {
          property: 'scale',
          to: '1 1 1',
          dur: 300
        });
      });
    });
  </script>

  <style>
    body { 
      margin: 0; 
      overflow: hidden; 
      background: #000;
    }
  </style>
</body>
</html>