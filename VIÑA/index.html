<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Escena 1 - Vi√±edo</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
</head>
<body>
  <a-scene>

<a-entity
  id="msucia_de_fondo.mp3"
  sound="src: musica_de_fondo.mp3; loop: true; volume: 0.4">
</a-entity>

    <!-- Cielo -->
    <a-sky src="cielo.jpg" rotation="0 -90 0"></a-sky>
    
    <!-- Suelo -->
    <a-plane position="0 0 0" rotation="-90 0 0" width="40" height="40" color="#8B7355"></a-plane>
    
    <!-- Iluminaci√≥n -->
    <a-light type="ambient" intensity="0.7"></a-light>
    <a-light type="directional" position="3 5 2" intensity="0.8" color="#FFD700"></a-light>
    <a-light type="point" position="0 3 -5" intensity="1.5" color="#FFA500"></a-light>

    <!-- ========== ENTRADA ========== -->
    <a-entity position="0 0 -1">
      <a-cylinder position="-2.5 1.5 0" radius="0.25" height="3" color="#654321"></a-cylinder>
      <a-cylinder position="2.5 1.5 0" radius="0.25" height="3" color="#654321"></a-cylinder>
      
      <a-box position="0 3.2 0" width="5.5" height="0.4" depth="0.3" color="#2C1810"></a-box>
      
      <a-plane position="0 3.8 0" width="4" height="0.8" color="#1a0f0a">
        <a-text value=" BODEGA PREMIUM" 
                align="center" position="0 0 0.02" width="3.5" color="#FFD700"></a-text>
      </a-plane>
    </a-entity>
    
    <!-- ========== PANEL INFORMATIVO ========== -->
    <a-box position="-3 1.7 -3.5" width="2" height="1.3" depth="0.12" color="#8B4513">
      <a-plane position="0 0 0.07" width="1.85" height="1.15" color="#1a0f0a">
        <a-text value=" BIENVENIDO \n\n Produccion: 5.000 bot/a√±o\n Premios: 12 medallas\n Exportacion: 25 paises\n Trabajadores: 45\n Hectareas: 120" 
                align="center" position="0 0 0.02" width="1.7" color="#FFD700"></a-text>
      </a-plane>
          <a-entity id="musica-ambiente" 
              sound="src: url(musica_de_fondo_2.mp3); 
                     autoplay: true; 
                     loop: true; 
                     volume: 0.5">
           </a-entity>
    </a-box>
    
    <!-- ========== BARRILES ========== -->
    <a-entity position="3 0.6 -3">
      <a-cylinder radius="0.4" height="1.2" color="#654321"
                  animation="property: rotation; to: 0 360 0; loop: true; dur: 10000; easing: linear">
        <a-torus position="0 0.45 0" radius="0.41" radius-tubular="0.03" color="#C0C0C0" rotation="90 0 0"></a-torus>
        <a-torus position="0 0 0" radius="0.41" radius-tubular="0.03" color="#C0C0C0" rotation="90 0 0"></a-torus>
        <a-torus position="0 -0.45 0" radius="0.41" radius-tubular="0.03" color="#C0C0C0" rotation="90 0 0"></a-torus>
      </a-cylinder>
      
      <a-plane position="0 0 0.42" width="0.6" height="0.4" color="#F4E4C1">
        <a-text value="ROBLE\nFRANCES\n‚òÖ 2020 ‚òÖ" align="center" position="0 0 0.01" width="0.9" color="#654321"></a-text>
      </a-plane>
      
      <a-light type="point" position="0 1.5 0" intensity="1.2" color="#FFD700" distance="3"></a-light>
    </a-entity>
    
    <a-cylinder position="4.5 0.6 -3.5" radius="0.38" height="1.2" color="#6F4E37">
      <a-torus position="0 0.45 0" radius="0.39" radius-tubular="0.03" color="#C0C0C0" rotation="90 0 0"></a-torus>
      <a-torus position="0 -0.45 0" radius="0.39" radius-tubular="0.03" color="#C0C0C0" rotation="90 0 0"></a-torus>
      
      <a-plane position="0 0 0.4" width="0.5" height="0.35" color="#F4E4C1">
        <a-text value="ROBLE\n2019" align="center" position="0 0 0.01" width="0.8" color="#654321"></a-text>
      </a-plane>
    </a-cylinder>
    
    <!-- ========== RACIMO DE UVAS ========== -->
    <a-entity position="-2 1.4 -2.8">
      <a-sphere radius="0.2" color="#8B008B"
                animation="property: position; to: -2 1.7 -2.8; dur: 2500; dir: alternate; loop: true; easing: easeInOutSine">
      </a-sphere>
      <a-sphere position="0.18 -0.12 0.1" radius="0.18" color="#9932CC"></a-sphere>
      <a-sphere position="-0.18 -0.12 -0.1" radius="0.18" color="#800080"></a-sphere>
      <a-sphere position="0 -0.28 0" radius="0.17" color="#9400D3"></a-sphere>
      <a-sphere position="0.15 -0.2 -0.12" radius="0.16" color="#8B008B"></a-sphere>
    </a-entity>
    
    <!-- ========== CONTADOR ========== -->
    <a-entity position="3.5 2.8 -2.5">
      <a-box width="1.8" height="0.75" depth="0.12" color="#1a1a1a"></a-box>
      <a-plane position="0 0 0.07" width="1.65" height="0.6" color="#0a0a0a">
        <a-text id="contador" 
                value=" VISITANTES: 150\n 15:30:00" 
                align="center" position="0 0 0.02" width="1.45" color="#00FF00"></a-text>
      </a-plane>
      
      <a-sphere position="-0.75 0.32 0.08" radius="0.04" color="#FF0000"
                animation="property: components.material.emissiveIntensity; from: 0; to: 2; dur: 600; dir: alternate; loop: true">
      </a-sphere>
      <a-sphere position="0.75 0.32 0.08" radius="0.04" color="#00FF00"
                animation="property: components.material.emissiveIntensity; from: 0; to: 2; dur: 600; dir: alternate; loop: true; delay: 300">
      </a-sphere>
    </a-entity>
    
    <!-- ========== PORTAL A ESCENA 2 ========== -->
    <a-entity id="portal-escena2" position="0 1.6 -6.5">
      <!-- Base del portal -->
      <a-box position="0 -0.8 0" width="3.5" height="0.35" depth="0.6" color="#B8860B"></a-box>
      
      <!-- Anillo exterior CLICKEABLE -->
      <a-torus id="anillo-click" 
               radius="1.4" 
               radius-tubular="0.18" 
               color="#FFD700"
               material="metalness: 1; roughness: 0; emissive: #FFD700; emissiveIntensity: 0.8"
               animation="property: rotation; to: 0 0 360; loop: true; dur: 8000; easing: linear"
               class="clickable">
      </a-torus>
      
      <!-- Anillo medio -->
      <a-torus radius="1" 
               radius-tubular="0.12" 
               color="#FFA500"
               material="metalness: 1; roughness: 0; emissive: #FFA500; emissiveIntensity: 0.9"
               animation="property: rotation; to: 0 0 -360; loop: true; dur: 6000; easing: linear">
      </a-torus>
      
      <!-- Centro brillante -->
      <a-circle radius="0.8" color="#FFE4B5" opacity="0.4"
                animation="property: scale; to: 1.15 1.15 1.15; dur: 2000; dir: alternate; loop: true; easing: easeInOutSine">
      </a-circle>
      
      <!-- Texto flotante -->
      <a-plane position="0 0 0.25" width="3" height="0.75" color="#000000" opacity="0.75">
        <a-text value=">>> PLANTA DE PRODUCCION <<<\n CLICK EN EL ANILLO " 
                align="center" position="0 0 0.02" width="2.7" color="#FFFFFF"
                animation="property: scale; to: 1.05 1.05 1.05; dur: 1500; dir: alternate; loop: true">
        </a-text>
      </a-plane>
      
      <!-- Rayos decorativos -->
      <a-cone position="0.9 0 0" radius-bottom="0.05" radius-top="0" height="2.5" color="#FFD700" opacity="0.3" rotation="0 0 -90"></a-cone>
      <a-cone position="-0.9 0 0" radius-bottom="0.05" radius-top="0" height="2.5" color="#FFD700" opacity="0.3" rotation="0 0 90"></a-cone>
      <a-cone position="0 0.9 0" radius-bottom="0.05" radius-top="0" height="2.5" color="#FFD700" opacity="0.3" rotation="-90 0 0"></a-cone>
      
      <!-- Luz del portal -->
      <a-light type="point" intensity="2.5" color="#FFD700" distance="8"></a-light>
    </a-entity>
    
    <!-- ========== DECORACI√ìN ========== -->
    <!-- Vallas del vi√±edo -->
    <a-entity position="-6 0 -8" rotation="0 20 0">
      <a-box width="0.12" height="1.5" depth="0.12" color="#654321" position="0 0.75 0"></a-box>
      <a-box width="0.12" height="1.5" depth="0.12" color="#654321" position="1.2 0.75 0"></a-box>
      <a-box width="0.12" height="1.5" depth="0.12" color="#654321" position="2.4 0.75 0"></a-box>
      <a-box width="2.6" height="0.05" depth="0.05" color="#654321" position="1.2 1.3 0"></a-box>
    </a-entity>
    
    <a-entity position="6 0 -8" rotation="0 -20 0">
      <a-box width="0.12" height="1.5" depth="0.12" color="#654321" position="0 0.75 0"></a-box>
      <a-box width="0.12" height="1.5" depth="0.12" color="#654321" position="-1.2 0.75 0"></a-box>
      <a-box width="0.12" height="1.5" depth="0.12" color="#654321" position="-2.4 0.75 0"></a-box>
      <a-box width="2.6" height="0.05" depth="0.05" color="#654321" position="-1.2 1.3 0"></a-box>
    </a-entity>
    
    <!-- ========== C√ÅMARA ========== -->
    <a-entity position="0 0 2">
      <a-camera position="0 1.6 0" wasd-controls="acceleration: 20">
        <a-cursor color="#FFD700" 
                  raycaster="objects: .clickable"
                  fuse="true"
                  fuse-timeout="1500"
                  animation__click="property: scale; startEvents: click; from: 0.8 0.8 0.8; to: 1.3 1.3 1.3; dur: 150">
          <a-ring position="0 0 -0.3" 
                  radius-inner="0.022" 
                  radius-outer="0.032" 
                  material="color: cyan; shader: flat"
                  animation__fusing="property: scale; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500; easing: easeInCubic">
          </a-ring>
        </a-cursor>
      </a-camera>
    </a-entity>
    
  </a-scene>

  <script>
    console.log(' Iniciando Escena 1 - Vi√±edo...');
    
    let visitantes = 150;
    
    document.querySelector('a-scene').addEventListener('loaded', function() {
      console.log('Escena 1 Cargada Correctamente');
      
      // Contador actualizado
      const contador = document.querySelector('#contador');
      setInterval(() => {
        visitantes += Math.floor(Math.random() * 4);
        const ahora = new Date();
        contador.setAttribute('value', 
          ` VISITANTES: ${visitantes}\n ${ahora.toLocaleTimeString()}`
        );
      }, 3000);
      
      // PORTAL CLICKEABLE
      const anilloPortal = document.querySelector('#anillo-click');
      
      anilloPortal.addEventListener('click', function() {
        console.log('üö™ ¬°Portal activado! Viajando a Escena 2...');
        
        // Efecto visual de transici√≥n
        const sky = document.querySelector('a-sky');
        sky.setAttribute('animation', {
          property: 'components.material.color',
          to: '#000000',
          dur: 1000,
          easing: 'easeInCubic'
        });
        
        // Fade del anillo
        anilloPortal.setAttribute('animation__fade', {
          property: 'scale',
          to: '3 3 3',
          dur: 1000,
          easing: 'easeInCubic'
        });
        
        // Cambiar de escena
        setTimeout(() => {
          window.location.href = 'escena2.html';
        }, 1000);
      });
      
      // Efecto hover en el portal
      anilloPortal.addEventListener('mouseenter', function() {
        anilloPortal.setAttribute('material', 'emissiveIntensity', '1.5');
        anilloPortal.setAttribute('animation__hover', {
          property: 'scale',
          to: '1.1 1.1 1.1',
          dur: 300
        });
      });
      
      anilloPortal.addEventListener('mouseleave', function() {
        anilloPortal.setAttribute('material', 'emissiveIntensity', '0.8');
        anilloPortal.setAttribute('animation__hover', {
          property: 'scale',
          to: '1 1 1',
          dur: 300
        });
      });
    });
  </script>

  <style>
    body { 
      margin: 0; 
      overflow: hidden; 
      background: #000;
    }
  </style>
</body>
</html>